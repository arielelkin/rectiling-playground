<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ponting Rectilinear Tilings</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app-shell">
      <header>
        <h1>Rectiling Playground</h1>
        <p>
          Interactive port of the 2017 Sage script for generating rectangular
          tilings via Ponting&rsquo;s extrapolation rules. Adjust the parameters,
          edit the seed rectangles, and render the tiling directly in your
          browser.
        </p>
      </header>

      <section class="controls">
        <form id="tilingForm">
          <div class="field-grid">
            <label>
              <span>cx (multiple of 4)</span>
              <input
                type="number"
                id="cxInput"
                name="cx"
                min="8"
                step="4"
                value="120"
                required
                data-auto-control="true"
              />
            </label>
            <label>
              <span>Grid width (even)</span>
              <input
                type="number"
                id="gridWidthInput"
                name="gridWidth"
                min="4"
                step="2"
                value="116"
                required
                data-auto-control="true"
              />
            </label>
            <label>
              <span>Max side (colour scaling)</span>
              <input
                type="number"
                id="maxSideInput"
                name="maxSide"
                min="1"
                value="250"
                required
                data-auto-control="true"
              />
            </label>
            <label>
              <span>Edge width (px)</span>
              <input
                type="number"
                id="edgeInput"
                name="edge"
                min="0"
                step="0.1"
                value="0.5"
                required
                data-auto-control="true"
              />
            </label>
            <label>
              <span>Max iterations</span>
              <input
                type="number"
                id="iterationsInput"
                name="maxIterations"
                min="1"
                value="200"
                required
                data-auto-control="true"
              />
            </label>
            <label>
              <span>Canvas size (px)</span>
              <input
                type="number"
                id="canvasSizeInput"
                name="canvasSize"
                min="200"
                value="700"
                required
                data-auto-control="true"
              />
            </label>
            <label class="checkbox">
              <input
                type="checkbox"
                id="colourCheckbox"
                name="colourIn"
                checked
                data-auto-control="true"
              />
              <span>Colour rectangles</span>
            </label>
            <label class="checkbox">
              <input
                type="checkbox"
                id="labelCheckbox"
                name="labelTiling"
                data-auto-control="true"
              />
              <span>Label rectangles</span>
            </label>
          </div>

          <div class="presets">
            <label>
              <span>Pattern preset</span>
              <select id="presetSelect" data-auto-control="true">
                <option value="classic">Classic (Ponting 2017)</option>
                <option value="square">Square tessellation sample</option>
              </select>
            </label>
            <p class="preset-note">
              Presets define the starting rectangles; switch patterns to explore different tilings.
            </p>
          </div>

          <div class="actions">
            <button type="button" id="downloadBtn">Download PNG</button>
            <output id="status" role="status" aria-live="polite"></output>
          </div>
        </form>
      </section>

      <section class="canvas-wrapper">
        <canvas id="tilingCanvas" width="700" height="700"></canvas>
      </section>
    </main>

    <template id="classicPreset">
      0 1 10 20
      1 1 12 16
      0 0 9 14
      1 0 13 13
      0 -1 8 9
      1 -1 3 10
    </template>

    <template id="squarePreset">
      0 1 5 5
      1 1 2 2
      0 0 3 3
      1 0 4 4
      0 -1 10 10
      1 -1 9 9
    </template>

    <script src="app.js" type="module"></script>
  </body>
</html>
